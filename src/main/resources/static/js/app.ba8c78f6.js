(function(t){function e(e){for(var r,i,s=e[0],l=e[1],p=e[2],d=0,u=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);c&&c(e);while(u.length)u.shift()();return o.push.apply(o,p||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},o=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var c=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("5a56")},"0c3a":function(t,e,a){},"2c86":function(t,e,a){"use strict";a("a928")},"37b9":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container"},[t._v(" "+t._s(this.$store.state.memberInfo.name)+" "),a("router-view")],1)])},o=[],i={name:"App",components:{},computed:{}},s=i,l=(a("034f"),a("0c7c")),p=Object(l["a"])(s,n,o,!1,null,null,null),c=p.exports,d=a("8c4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v(" 로그인이다 쫘식아 "),a("login-box")],1)},v=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"loginBox"}},[a("div",[t._v(" ㅎㅏ이 "+t._s(this.$store.state.memberInfo.name)+" "),a("router-link",{attrs:{to:"/main"}},[t._v("메인 이동")])],1)])},f=[],h={name:"LoginBox",components:{}},_=h,b=Object(l["a"])(_,m,f,!1,null,null,null),I=b.exports,g={name:"App",components:{LoginBox:I}},M=g,E=Object(l["a"])(M,u,v,!1,null,null,null),A=E.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("div",[t._v(t._s(this.$store.state.memberInfo.name)+" 님의 문서")]),a("button",{on:{click:function(e){return t.$router.push({path:"/"})}}},[t._v("로그아웃")]),a("SubNav"),a("Contents")],1)},y=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sub_nav"}},[a("div",{staticClass:"nav_lst first",staticStyle:{"padding-top":"14px","padding-bottom":"14px"}},[a("h3",[a("router-link",{attrs:{to:"/register"}},[t._v("기안 신청하기")])],1)]),a("div",{staticClass:"nav_lst"},[a("h3",{on:{click:function(e){return t.setSearchParam("WAIT",null,t.loginedMemberInfo.memberId,t.loginedMemberInfo.memberId,"WAIT")}}},[t._v(t._s(t.APPROVAL_TYPE.WAIT)+" ")]),a("ul",[a("li",{on:{click:function(e){return t.setSearchParam("WAIT",null,null,t.loginedMemberInfo.memberId,"WAIT_APPROVE")}}},[t._v(t._s(t.APPROVAL_TYPE.WAIT_APPROVE))]),a("li",{on:{click:function(e){return t.setSearchParam("WAIT",null,t.loginedMemberInfo.memberId,null,"WAIT_REQUEST")}}},[t._v(t._s(t.APPROVAL_TYPE.WAIT_REQUEST))])]),a("h3",{on:{click:function(e){return t.setSearchParam("COMPLETE",null,t.loginedMemberInfo.memberId,t.loginedMemberInfo.memberId,"COMPLETE")}}},[t._v(t._s(t.APPROVAL_TYPE.COMPLETE))]),a("ul",[a("li",{on:{click:function(e){return t.setSearchParam("COMPLETE","APPROVE",t.loginedMemberInfo.memberId,t.loginedMemberInfo.memberId,"COMPLETE_APPROVE")}}},[t._v(t._s(t.APPROVAL_TYPE.COMPLETE_APPROVE))]),a("li",{on:{click:function(e){return t.setSearchParam("COMPLETE","RETURN",t.loginedMemberInfo.memberId,t.loginedMemberInfo.memberId,"COMPLETE_RETURN")}}},[t._v(t._s(t.APPROVAL_TYPE.COMPLETE_RETURN))])])])])},S=[],T=new r["a"],O=T,w={name:"SubNav",methods:{setSearchParam:function(t,e,a,r,n){var o=this.APPROVAL_TYPE[n],i={requestStatusCode:t,approvalStatusCode:e,requestMemberId:a,approveMemberId:r};O.$emit("deliverSearchParam",i,o),O.$emit("changeContentState",!1),O.$emit("changeLoading",!0)}},data:function(){return{loginedMemberInfo:this.$store.state.memberInfo,approvalList:[],APPROVAL_TYPE:{WAIT:"진행중인 결재 문서",WAIT_APPROVE:"결재할 문서",WAIT_REQUEST:"상신/결재한 문서",COMPLETE:"완료 문서",COMPLETE_APPROVE:"승인 문서",COMPLETE_RETURN:"반려 문서"}}}},L=w,$=Object(l["a"])(L,C,S,!1,null,null,null),R=$.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.loading?r("div",{staticClass:"loader"},[r("img",{attrs:{src:a("cf1c")}})]):t._e(),t.isDefaultShow?r("Default"):t._e(),t.isDefaultShow?t._e():r("List")],1)},q=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"default"}},[a("div",{attrs:{id:"content"}},[a("table",{attrs:{id:"recentApproval"}},[a("div",{attrs:{id:"main_content"}},[t._m(0),a("div",{staticClass:"section_main"},[a("ul",{staticClass:"lst_type"},t._l(t.approvalList,(function(e,r){return a("li",{key:r},[a("em",[t._v(t._s(e.approvalType))]),a("p",[a("router-link",{attrs:{to:"view/"+e.approvalId}},[t._v(" "+t._s(e.title))])],1),a("span",[a("a",[t._v(t._s(e.requestMemberName))]),a("span",[t._v(t._s(e.registerDate))])])])})),0)])])])])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section_tit first main"},[a("h3",[t._v("최근 결재문서")])])}],j=(a("159b"),a("bc3a")),V=a.n(j),D={name:"Default",mounted:function(){var t=this,e={requestMemberId:this.loginedMemberInfo.memberId,approveMemberId:this.loginedMemberInfo.memberId};V.a.get("/api/approval/getApprovalList",{params:e}).then((function(e){0===e.data.code&&(e.data.body.forEach((function(t){"COMPLETE"===t.requestStatusCode?t.approvalType="완료문서":t.approvalType="대기문서"})),t.approvalList=e.data.body)}))},methods:{},data:function(){return{loginedMemberInfo:this.$store.state.memberInfo,approvalList:[]}}},U=D,W=Object(l["a"])(U,k,N,!1,null,null,null),Y=W.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"list"}},[a("div",{attrs:{id:"content"}},[a("div",{staticClass:"section_tit frst"},[a("h3",[t._v(t._s(t.typeName)),a("span",{staticClass:"tit_dsc"},[t._v(" 총 "+t._s(t.approvalList.length)+" 건")])]),a("table",{attrs:{id:"approval-list"}},[t._m(0),a("tbody",t._l(t.approvalList,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.approvalId))]),a("td",[a("router-link",{attrs:{to:"view/"+e.approvalId}},[t._v(" "+t._s(e.title))])],1),a("td",[t._v(t._s(e.requestMemberName))]),a("td",[t._v(t._s(e.approveMemberName))]),a("td",[t._v(t._s(e.requestApprovalType))]),a("td",[t._v(t._s(e.registerDate))]),a("td",[t._v(t._s(e.approveDate))])])})),0)])])])])},G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("문서번호")]),a("th",{attrs:{scope:"col"}},[t._v("제목")]),a("th",{attrs:{scope:"col"}},[t._v("기안자")]),a("th",{attrs:{scope:"col"}},[t._v("승인자")]),a("th",{attrs:{scope:"col"}},[t._v("승인상태")]),a("th",{attrs:{scope:"col"}},[t._v("기안일")]),a("th",{attrs:{scope:"col"}},[t._v("완료일")])])])}],B={REQUEST_WAIT:"요청중 문서",APPROVE_COMPLETE:"승인 완료",RETURN_COMPLETE:"반려 완료"},J={name:"List",created:function(){var t=this;O.$on("deliverSearchParam",(function(e,a){t.typeName=a,t.searchParam=e,t.getApprovalList()}))},methods:{getApprovalList:function(){var t=this;V.a.get("/api/approval/getApprovalList",{params:this.searchParam}).then((function(e){0===e.data.code&&(e.data.body.forEach((function(t){t.requestApprovalType=B[t.approvalStatusCode+"_"+t.requestStatusCode]})),t.approvalList=e.data.body,O.$emit("changeLoading",!1))}))}},data:function(){return{searchParam:{},approvalList:[],typeName:""}}},K=J,z=Object(l["a"])(K,Q,G,!1,null,null,null),F=z.exports,H={name:"Contents",components:{Default:Y,List:F},created:function(){var t=this;O.$on("changeContentState",(function(e){t.isDefaultShow=e})),O.$on("changeLoading",(function(e){t.loading=e}))},methods:{},data:function(){return{loading:!1,state:!1,isDefaultShow:!0}}},X=H,Z=(a("2c86"),Object(l["a"])(X,x,q,!1,null,null,null)),tt=Z.exports,et={name:"Main",components:{SubNav:R,Contents:tt},data:function(){return{}}},at=et,rt=Object(l["a"])(at,P,y,!1,null,null,null),nt=rt.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.loading?r("div",{staticClass:"loader"},[r("img",{attrs:{src:a("cf1c")}})]):t._e(),t._v(" 기안신청서 "),r("div",[t.showApproveModal?r("ModalView",{on:{close:function(e){t.showApproveModal=!1}}},[r("SelectApproveMember",{attrs:{props:t.approveMemberInfo},on:{approveMember:t.approveMember}})],1):t._e(),"register"===t.type||"edit"===t.type?r("button",{on:{click:function(e){t.showApproveModal=!0}}},[t._v("승인자 선택")]):t._e(),r("ul",[r("li",[t._v(t._s(t.approvalState))])]),r("ul",[r("li",[t._m(0),r("div",{staticClass:"name"},[r("span",{attrs:{title:"요청자"}},[t._v(t._s(t.requestMemberInfo.name))])]),r("div",{staticClass:"date"},[r("span",{attrs:{title:"요청일자"}},[t._v(" "+t._s(t.registerDate))])])]),r("li",[t._m(1),r("div",{staticClass:"name"},[r("span",{attrs:{title:"승인자"}},[t._v(t._s(t.approveMemberInfo.name))])]),r("div",{staticClass:"date"},[r("span",{attrs:{title:"승인일자"}},[t._v(" "+t._s(t.approveDate))])])])])],1),r("div"),r("div"),r("div",{staticClass:"tbl_type2"},[r("table",[t._m(2),r("tbody",[r("tr",[t._m(3),r("td",[r("div",{staticClass:"td"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"ipt_txt",staticStyle:{width:"200px"},attrs:{type:"text",disabled:"view"===t.type,title:"제목 입력란",placeholder:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])])]),r("tr",[t._m(4),r("td",[r("div",{staticClass:"td"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"ipt_txt",staticStyle:{width:"100%",height:"56px"},attrs:{disabled:"view"===t.type,name:"내용 입력란",cols:"20",rows:"3"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])])])])]),r("div",[r("button",{on:{click:function(e){return t.$router.push({path:"/main"})}}},[t._v("목록으로")]),"register"===t.type?r("button",{on:{click:function(e){return t.registApproval()}}},[t._v("등록하기")]):t._e(),t.isAvailEdit?r("button",{on:{click:function(e){return t.goEdit()}}},[t._v("편집")]):t._e(),t.isAvailEdit?r("button",{on:{click:function(e){return t.deleteApproval()}}},[t._v("삭제")]):t._e(),"edit"===t.type?r("button",{on:{click:function(e){return t.updateApproval()}}},[t._v("저장")]):t._e(),t.isAvailUpdate?r("button",{on:{click:function(e){return t.processApproval("APPROVE")}}},[t._v("승인")]):t._e(),t.isAvailUpdate?r("button",{on:{click:function(e){return t.processApproval("RETURN")}}},[t._v("반려")]):t._e()])])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"type"},[a("span",[t._v("요청자")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"type"},[a("span",[t._v("승인자")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("colgroup",[a("col",{staticStyle:{width:"130px"}}),a("col")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{attrs:{scope:"col"}},[a("div",{staticClass:"th"},[t._v("제목")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{attrs:{scope:"col"}},[a("div",{staticClass:"th"},[t._v("내용")])])}],st=a("53ca"),lt=(a("b0c0"),a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",[t._v("승인자 선택")]),a("div",[a("h2",[t._v("승인자를 선택해주세요")]),a("table",[t._m(0),a("tbody",t._l(t.memberList,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.memberId))]),a("td",[a("a",{on:{click:function(a){return t.deliverMemberInfo(e)}}},[t._v(t._s(e.name))])]),a("td",[t._v(t._s(e.gradeName))])])})),0)])])])}),pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("사번")]),a("th",[t._v("이름")]),a("th",[t._v("직급")])])}],ct={name:"SelectApproveMember",props:{},mounted:function(){this.getMemberList()},methods:{getMemberList:function(){var t=this;V.a.get("/api/member/getAvailApproveMemberList?memberId="+this.$store.state.memberInfo.memberId).then((function(e){"OK"===e.statusText&&(t.memberList=e.data)}))},deliverMemberInfo:function(t){this.approveMember=t,this.$emit("approveMember",t,!1)}},data:function(){return{approveMember:{},memberList:[]}}},dt=ct,ut=Object(l["a"])(dt,lt,pt,!1,null,null,null),vt=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal"},[a("div",{staticClass:"overlay",on:{click:function(e){return t.$emit("close")}}}),a("div",{staticClass:"modal-card"},[t._t("default"),a("button",{on:{click:function(e){return t.$emit("close")}}},[t._v(" 닫기 ")])],2)])},ft=[],ht={},_t=ht,bt=(a("acbf"),Object(l["a"])(_t,mt,ft,!1,null,null,null)),It=bt.exports,gt={REQUEST:"요청문서",APPROVE:"승인문서",RETURN:"반려문서"},Mt={name:"Detail",components:{SelectApproveMember:vt,ModalView:It},mounted:function(){if(this.type=this.$route.name,"view"===this.type||"update"===this.type){var t=this.$route.params.id;this.getApproval(t)}else"register"===this.type&&(this.requestMemberInfo=this.$store.state.memberInfo)},methods:{goEdit:function(){this.type="edit"},isNull:function(t){return""==t||null==t||void 0==t||null!=t&&"object"==Object(st["a"])(t)&&!Object.keys(t).length},getApproval:function(t){var e=this;this.loading=!0;var a={approvalId:t};V.a.get("/api/approval/getApproval",{params:a}).then((function(t){0===t.data.code&&(e.loading=!1,e.approvalId=t.data.body.approvalId,e.approveMemberInfo={memberId:t.data.body.approveMemberId,name:t.data.body.approveMemberName,gradeId:t.data.body.approveMemberGradeId},e.requestMemberInfo={memberId:t.data.body.requestMemberId,name:t.data.body.requestMemberName,gradeId:t.data.body.requestMemberGradeId},e.requestStatusCode=t.data.body.requestStatusCode,e.approvalStatusCode=t.data.body.approvalStatusCode,e.approvalState=gt[t.data.body.approvalStatusCode],e.title=t.data.body.title,e.content=t.data.body.content,e.registerDate=t.data.body.registerDate,e.approveDate=t.data.body.approveDate,e.isAvailEdit="view"===e.type&&"WAIT"===e.requestStatusCode&&e.loginedMemberInfo.memberId===t.data.body.requestMemberId,e.isAvailUpdate="view"===e.type&&"WAIT"===e.requestStatusCode&&e.loginedMemberInfo.memberId===t.data.body.approveMemberId)}))},approveMember:function(t,e){this.approveMemberInfo=t,this.showApproveModal=e},setParams:function(){var t={title:this.title,content:this.content,approveMemberId:this.approveMemberInfo.memberId,requestMemberId:this.requestMemberInfo.memberId,approveMemberGradeId:this.approveMemberInfo.gradeId,requestMemberGradeId:this.requestMemberInfo.gradeId};return t},validate:function(){if(this.isAvailEdit&&"WAIT"===this.requestStatusCode)throw"요청상태의 문서만 수정가능합니다.";if(this.isNull(this.title))throw"제목을 입력해주세요.";if(this.title.length>45)throw"제목의 길이는 45자를 넘을 수 없습니다.";if(this.isNull(this.content))throw"내용을 입력해주세요.";if(this.isNull(this.approveMemberInfo))throw"승인자가 지정되지 않았습니다.";if(this.content.length>3e3)throw"내용은 3000자를 넘을 수 없습니다.";if(this.approveMemberInfo.gradeId==this.requestMemberInfo.gradeId)throw"승인자는 요청자와 같은 직급일 수 없습니다.";if(this.approveMemberInfo.gradeId>this.requestMemberInfo.gradeId)throw"승인자는 요청자보다 직급이 높아야합니다.";return!0},registApproval:function(){try{if(this.validate()){var t=this.setParams();V.a.post("/api/approval",t).then((function(t){0===t.data.code&&(alert("기안을 상신하였습니다."),window.location.href="/view/"+t.data.approvalId)})).catch((function(t){console.log(t.response.data)}))}}catch(e){alert(e)}},goUpdate:function(t,e){var a=this;V.a.put(t,e).then((function(t){0===t.data.code&&alert("수정하였습니다."),window.location.href="/view/"+a.approvalId})).catch((function(t){a.isNull(t.response.data)?alert(t.response.data.error):alert(t.response.data.message)}))},updateApproval:function(){try{if(this.validate()){var t=this.setParams();t.approvalId=this.approvalId,t.requestStatusCode=this.requestStatusCode,t.approvalStatusCode=this.approvalStatusCode,this.goUpdate("/api/approval/update",t)}}catch(e){alert(e)}},processApproval:function(t){try{if(this.validate()){var e={approvalId:this.approvalId,requestStatusCode:this.requestStatusCode,approvalStatusCode:t};this.goUpdate("/api/approval/process",e)}}catch(a){alert(a)}},deleteApproval:function(){if(confirm("삭제하시겠습니까?"))if(this.isAvailEdit){var t={approvalId:this.approvalId,approvalStatusCode:this.approvalStatusCode};V.a.delete("/api/approval",{data:t}).then((function(t){0===t.data.code&&alert("기안을 삭제하였습니다."),window.location.href="/main"})).catch((function(t){alert(t.response.data.message)}))}else alert("요청상태의 문서만 수정 가능합니다.")}},data:function(){return{loading:!1,loginedMemberInfo:this.$store.state.memberInfo,isAvailEdit:!1,isAvailUpdate:!1,type:"register",approveMemberInfo:{},requestMemberInfo:{},showApproveModal:!1,approvalId:"",requestStatusCode:"",approvalState:"",approvalStatusCode:"",title:"",content:"",registerDate:"",approveDate:""}}},Et=Mt,At=(a("fd9e"),Object(l["a"])(Et,ot,it,!1,null,null,null)),Pt=At.exports;r["a"].use(d["a"]);var yt=new d["a"]({mode:"history",routes:[{path:"/",component:A},{path:"/main",component:nt},{name:"register",path:"/register",component:Pt,props:!0},{name:"view",path:"/view/:id",component:Pt}]}),Ct=a("2f62");r["a"].use(Ct["a"]);var St=new Ct["a"].Store({state:{memberInfo:{memberId:3,name:"네오",gradeId:3}},mutations:{},actions:{},modules:{}});r["a"].config.productionTip=!1,r["a"].prototype.$axios=V.a,new r["a"]({router:yt,store:St,render:function(t){return t(c)}}).$mount("#app")},"5a56":function(t,e,a){},a928:function(t,e,a){},acbf:function(t,e,a){"use strict";a("0c3a")},cf1c:function(t,e,a){t.exports=a.p+"img/loading.525834b9.gif"},fd9e:function(t,e,a){"use strict";a("37b9")}});
//# sourceMappingURL=app.ba8c78f6.js.map